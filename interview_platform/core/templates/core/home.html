{% extends "core/base.html" %}

{% block content %}
<div class="container">
	<div class="row mb-4">
		<div class="col-md-8 offset-md-2 text-center">
			<h1 class="display-4 mb-4">Welcome to the Interview Platform</h1>
			<p class="lead">A powerful tool for conducting technical interviews with shared code editor and whiteboard.</p>
		</div>
	</div>

	<div class="row">
		<div class="col-md-6">
			<div class="card mb-4">
				<div class="card-header bg-primary text-white">
					<h3 class="card-title mb-0">Create a New Session</h3>
				</div>
				<div class="card-body">
					<p>Start a new interview session as an interviewer. You'll get an access code to share with candidates.</p>
					<a href="{% url 'create_session' %}" class="btn btn-primary">Create Session</a>
				</div>
			</div>
		</div>
		
		<div class="col-md-6">
			<div class="card mb-4">
				<div class="card-header bg-success text-white">
					<h3 class="card-title mb-0">Join an Existing Session</h3>
				</div>
				<div class="card-body">
					<p>Join an interview session using the access code provided by the interviewer.</p>
					<form method="post" action="{% url 'join_session' %}">
						{% csrf_token %}
						<div class="input-group mb-3">
							<input type="text" name="access_code" class="form-control" placeholder="Enter access code" value="{{ access_code|default:'' }}">
							<button class="btn btn-success" type="submit">Join</button>
						</div>
						{% if error %}
						<div class="alert alert-danger">{{ error }}</div>
						{% endif %}
					</form>
				</div>
			</div>
		</div>
	</div>
	
	<!-- Active Sessions Section -->
	<div class="row mt-4">
		<div class="col-12">
			<div class="card">
				<div class="card-header bg-info text-white">
					<h3 class="card-title mb-0">Active Sessions</h3>
				</div>
				<div class="card-body">
					{% if active_sessions %}
						<div class="list-group">
							{% for session in active_sessions %}
								<div class="list-group-item list-group-item-action">
									<div class="d-flex w-100 justify-content-between">
										<h5 class="mb-1">{{ session.title }}</h5>
										<small>ID: {{ session.id }} | Code: {{ session.access_code }}</small>
									</div>
									<p class="mb-1">{{ session.description|default:"No description provided" }}</p>
									<small>Created: {{ session.date_created|date:"F j, Y, g:i a" }}</small>
									<div class="mt-2">
										<form method="post" action="{% url 'join_session' %}">
											{% csrf_token %}
											<input type="hidden" name="access_code" value="{{ session.access_code }}">
											<input type="hidden" name="confirm" value="1">
											<button type="submit" class="btn btn-sm btn-success">Join Session</button>
										</form>
									</div>
								</div>
							{% endfor %}
						</div>
					{% else %}
						<p class="text-center">No active sessions available at the moment.</p>
					{% endif %}
				</div>
			</div>
		</div>
	</div>
</div>
{% endblock %}